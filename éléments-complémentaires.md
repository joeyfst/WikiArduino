## _Projet Home Trainer : Comment votre montage peut-il s'intégrer dans le projet plus global de Home Trainer ? Dans quelle mesure devra-t-il être adapté ?_

Plusieurs éléments de notre montage pourront, plus tard, s’intégrer dans le projet Home Trainer. Nous avons utilisé au total 3 capteurs, chacun permettant une entrée de données, que nous pourrons utiliser pour améliorer le Home Trainer. L’avantage de notre montage est que chacun de nos éléments, que ce soit les capteurs ou les câbles, sont fixés sur la breadboard, et disposent donc déjà d’un support physique. Bien que celui-ci ne soit évidemment pas stable, et devra donc être complété par de l’adhésif, fil ou autre liant, il peut être fixé sur un objet solide comme un guidon de vélo. Nous avons cependant remarqué que certains de nos capteurs, notamment le gyroscope et l’ECG, sont assez sensibles à l’utilisation et qu’un mouvement trop brusque pouvait les déconnecter facilement. Il faudra donc être vigilant quant à leur inclusion sur un objet tel qu’un vélo. 

Pour ce qui est des capteurs, nous avons :
- Gyroscope : Le gyroscope pourra se placer au niveau du guidon ou de la roue avant du vélo afin de détecter les mouvements du vélo et la direction empruntée par le joueur. Si celui-ci tourne à gauche, le capteur pourra le détecter, et inversement pour la droite. Il faudra que l’on développe un calcul de la direction et de l’accélération pour mesurer cela, ce qui n’est pas encore présent dans notre code, mais le paramètre de la direction du joueur peut ajouter un nouvel élément dynamique au jeu. 
- Capteur RFID : Une manière simple de créer une identification pour notre joueur est d’utiliser les cartes étudiants des élèves d’ISIS, qui pourront être détectées par notre capteur RFID. Dans l’idée, il suffira de passer sa carte devant le capteur pour se connecter au jeu, et retrouver ses anciens scores, sa progression, tous les éléments de jeu auxquels nous avions réfléchi lors du cours d’UX Design. Pour le moment, nous avions seulement gardé en local les identifiants de deux badges RFID pour les associer au badge détecté, mais plus tard on peut imaginer une base de données en local ou sur le cloud pour faciliter la connexion, voire la récupération des données des cartes étudiantes d’ISIS (si cela est possible).
- ECG : L’ECG sera potentiellement difficile à intégrer au Home Trainer, simplement car les capteurs à placer sur le corps ne disposent pas de câbles suffisamment longs pour ne pas entraver les mouvements. Nous avons remarqué qu’il est difficile de se mouvoir ou déplacer avec les capteurs fixés sur le corps, et que les vêtements constituent aussi une barrière supplémentaire. Cependant, si nous parvenons à résoudre ce problème, cela peut donner une variable supplémentaire intéressante à intégrer au Home Trainer. Nous pourrions détecter en direct le rythme cardiaque du joueur et lui envoyer des messages directement en fonction de ce rythme, comme “accélère” s’il est trop bas, ou “ralentis” s’il est trop élevé. On peut également imaginer cette intégration comme un élément de gamedesign, comme des obstacles arrivant plus vite si la fréquence cardiaque est basse et inversement. 

Au-delà de notre montage, chaque capteur peut aussi s’utiliser séparément. Hormis pour notre système de connexion, ils ne dépendent pas les uns des autres, et peuvent facilement s’intégrer à un montage préexistant ou parcellaire de Arduino pour constituer un bloc fonctionnel du projet. 

## _Ouverture : réflexion sur les futures améliorations possibles et les défis à relever._

Nous avons partiellement évoqué les améliorations possibles dans la partie précédente, mais nous pouvons imaginer : 
- Un stockage local des identifiants de puce RFID des joueurs. Notre connexion est pour l’instant basée sur une condition dans notre dashboard Node-RED, mais cela n’est pas viable pour de nombreux utilisateurs. On peut donc imaginer une inscription rapide lors de la première connexion, avec nom, prénom et badge, qui sera stockée dans une base de données locale. Lorsqu’on badgera lors d’une future connexion, on pourra récupérer ces informations et en ajouter de nouvelles : scores, succès, etc. Ce stockage local peut se faire facilement en créant des objets JSON via Node-RED, mais on peut aussi penser à un système plus poussé, avec une base de données distante contenant déjà les identifiants de tous les étudiants d’ISIS, ce qui éviterait de passer par l’étape d’inscription. Nous ne savons cependant pas si cela sera possible, tant du côté sécurité que fonctionnel. 
- Un calcul de la direction : pour le moment notre projet ne traite pas l’accélération et l’orientation obtenues par le gyroscope, nous nous contentons de l’afficher à l’aide de jauges. Mais pour une intégration au Home Trainer, il faudra que nous traitions ces données pour les transformer en direction. Nous savons qu’en fixant le gyroscope à un guidon, nous pourrons obtenir l’inclinaison de ce dernier pour savoir quand le joueur tourne, et vers où il se dirige. Ainsi, si l’on fixe à 0 la position de base du gyroscope et que l’on obtient une valeur positive, il se dirigera d’un côté, et si la valeur devient négative, il se dirigera de l’autre. De plus, si la valeur est élevée, il tourne beaucoup, alors que si elle est faible, il tourne légèrement. A cela s’ajoute l’accélération, que l’on pourra utiliser pour calculer la vitesse à laquelle tourne le joueur. Ces données pourront servir à mieux diriger l’avatar du joueur, pour éviter des obstacles plus facilement. Nous n’avions pas eu le temps de mettre cela en place lors des séances de cours mais c’est un ajout qui nous paraît avoir une grande plus-value pour le Home Trainer. 
- Feedback de connexion supplémentaire : nous utilisons dans notre montage deux LED pour montrer l’état de la connexion de l’utilisateur. La LED rouge s’allume si personne n’est connecté, et la LED verte s’allume si quelqu’un est connecté. Cependant cela n’est peut-être pas le système le plus visible pour les utilisateurs, et un signal sonore pourrait aussi être un moyen efficace de le faire comprendre. Nous pourrions alors mettre en place un son joué par l’ordinateur lorsqu’un utilisateur est connecté ou déconnecté. Cela ajouterait un feedback supplémentaire intéressant.

## _Critique : qu'est-ce qui aurait pu être fait autrement, quelles sont les limites du système, etc._

Nous sommes conscients que notre montage Arduino est pour le moment incomplet. Nous n’avons pas pu aller jusqu’au bout de nos idées par rapport aux différents capteurs, et aurions aimé rajouter des éléments à notre dashboard Node-RED qui est assez simple. Cela peut s’expliquer notamment par le fait que nous avons changé de capteur en cours de route (nous avions à la base l’oxymètre de pouls que nous avons échangé pour l’ECG), mais aussi par l’instabilité de notre montage qui, bien que correct et fonctionnel, reste très sensible. Le gyroscope nous a notamment posé problème, il peut parfois ne pas du tout se connecter au système et donc ne relever aucune donnée, ou alors s’arrêter en cours de montage suite à un mouvement trop brusque. Cela en fait donc un montage parfois difficile d’utilisation, et son support est une limite.

Également, notre ECG ne relève qu’un signal électrique qui n’est pas interprétable directement en tant que fréquence cardiaque. Il faut effectuer un calcul supplémentaire afin d’obtenir un vrai rythme, que nous n’avons pas encore réussi à mettre en place, malgré plusieurs fonctions implémentées dans le code. Nous avions quelques pistes mais qui ne fonctionnaient pas ou n’ont pas donné de changement de résultats. Plus tard, il nous faudra donc ajouter une manière d’interpréter cette donnée afin de pouvoir l’utiliser dans le Home Trainer. 
